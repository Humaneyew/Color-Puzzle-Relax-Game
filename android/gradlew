#!/usr/bin/env sh

# Gradle wrapper launcher generated for repositories where binary files cannot be checked in.
# Downloads the wrapper JAR on first use and then executes it just like the standard script.

set -e

APP_HOME="$(CDPATH= cd -- "$(dirname "$0")" >/dev/null 2>&1 && pwd -P)"
WRAPPER_DIR="$APP_HOME/gradle/wrapper"
WRAPPER_JAR="$WRAPPER_DIR/gradle-wrapper.jar"
WRAPPER_VERSION="8.9"
WRAPPER_COORD="https://repo.maven.apache.org/maven2/org/gradle/gradle-wrapper/${WRAPPER_VERSION}/gradle-wrapper-${WRAPPER_VERSION}.jar"

if [ ! -f "$WRAPPER_JAR" ]; then
  mkdir -p "$WRAPPER_DIR"
  echo "Downloading Gradle wrapper $WRAPPER_VERSION..." >&2
  if command -v curl >/dev/null 2>&1; then
    curl -fL "$WRAPPER_COORD" -o "$WRAPPER_JAR"
  elif command -v wget >/dev/null 2>&1; then
    wget -q "$WRAPPER_COORD" -O "$WRAPPER_JAR"
  else
    echo "Neither curl nor wget is available. Please download $WRAPPER_COORD manually as $WRAPPER_JAR" >&2
    exit 1
  fi
fi

CLASSPATH="$WRAPPER_JAR"
JAVA_OPTS="${JAVA_OPTS:-}"
GRADLE_OPTS="${GRADLE_OPTS:-}"
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Escape application args
save () {
  for i do printf %s\\n "$i" | sed "s/'/'\\\\''/g; s/^/'/; s/$/' \\ \\ /"; done
  echo " "
}

APP_ARGS=$(save "$@")

eval set -- $DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS -classpath "$CLASSPATH" org.gradle.wrapper.GradleWrapperMain "$APP_ARGS"

if [ -n "$JAVA_HOME" ]; then
  JAVA_EXEC="$JAVA_HOME/bin/java"
else
  JAVA_EXEC=java
fi

exec "$JAVA_EXEC" "$@"
